{% extends 'index.html' %}

{% block content %}

<h1 class="row justify-content-center mt-3 mb-5"> {% block title %} Filter movies by dates {% endblock %} </h1>
<div class="container">
    <form method="POST" action="{{ url_for('filter_movies') }}">
  <div class="form-group">
    <label class="mt-3">Start Date:</label>
    <input type="date" class="form-control" name="start_date" required>
  </div>
  <div class="form-group">
    <label>End Date:</label>
    <input type="date" class="form-control" name="end_date" required>
  </div>
  <button type="submit" class="btn btn-primary mb-4">Filter Movies</button>
</form>
     {% if start_date and end_date %}
    <h3 class="row justify-content-center mt-3 mb-5"> Movie released between {{ start_date }} and {{ end_date }} </h3>
     {% endif %}
    <div class="row justify-content-center">

        {% for movie in movies %}
        <div class="card mb-4 ml-3">
            <div class="shadow-sm">
                <div>
                    {% for image in image_names %}
                    {% if image == movie.poster %}
                        <img src="{{url_for('send_image', filename=image) }}" class="card " style="width: 18rem;"
                         width="220" height="326">
                </div>
                        {% endif %}
                        {% endfor %}

                <div class="card-body">
                    <a class="font-weight-bold">{{ movie.title }}</a>
                    <p class="card-text"> by <a href="{{ url_for('movie_by_director', director_name=movie.director) }}">{{ movie.director }}</a></p>
                    <p class="card-text">{{ movie.genre }}</p>
                    <p class="card-text">IMDb: {{movie.rating}}</p>
                    <p></p>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                            <a href="{{ url_for('moviepage', id=movie.movie_id) }}" type="button" class="btn btn-sm btn-outline-secondary">View</a>

                             {% if current_user.username == movie.posted_by %}
                            <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                            {% endif %}
                        </div>
                        <small class="text-body-secondary">Added by: {{movie.posted_by }}</small>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

    </div>
</div>

{% endblock %}